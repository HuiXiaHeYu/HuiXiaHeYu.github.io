{"version":3,"file":"index.js","sources":["../../src/client/enhanceTwoslash.ts"],"sourcesContent":["import { isMobile } from '@vuepress/helper/client'\n\nimport FloatingVue, { recomputeAllPoppers } from 'floating-vue'\nimport type { App } from 'vue'\nimport 'floating-vue/dist/style.css'\n\n/**\n * Enhance Vue app with twoslash support using FloatingVue\n *\n * 使用 FloatingVue 为 Vue 应用增强 twoslash 支持\n *\n * @param app - Vue app instance / Vue 应用实例\n *\n * @example\n * ```ts\n * import { enhanceTwoslash } from '@vuepress/shiki-twoslash/client'\n *\n * export default {\n *   enhance({ app }) {\n *     enhanceTwoslash(app)\n *   }\n * }\n * ```\n */\nexport const enhanceTwoslash = (app: App): void => {\n  const isMobileDevice = __VUEPRESS_SSR__\n    ? false\n    : isMobile(navigator.userAgent)\n\n  if (!__VUEPRESS_SSR__) {\n    // Recompute poppers when clicking on a tab\n    window.addEventListener(\n      'click',\n      (event) => {\n        const path = event.composedPath()\n        if (\n          path.some((el) =>\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n            (el as HTMLElement)?.classList?.contains('vp-code-tab'),\n          )\n        )\n          recomputeAllPoppers()\n      },\n      { passive: true },\n    )\n  }\n\n  app.use(FloatingVue, {\n    themes: {\n      'twoslash': {\n        $extend: 'dropdown',\n        triggers: isMobileDevice ? ['touch'] : ['hover', 'touch'],\n        popperTriggers: isMobileDevice ? ['touch'] : ['hover', 'touch'],\n        placement: 'bottom-start',\n        overflowPadding: 10,\n        delay: 0,\n        handleResize: false,\n        autoHide: true,\n        instantMove: true,\n        flip: false,\n        arrowPadding: 8,\n        autoBoundaryMaxSize: true,\n      },\n      'twoslash-query': {\n        $extend: 'twoslash',\n        triggers: ['click'],\n        popperTriggers: ['click'],\n        autoHide: false,\n      },\n      'twoslash-completion': {\n        $extend: 'twoslash-query',\n        triggers: ['click'],\n        popperTriggers: ['click'],\n        autoHide: false,\n        distance: 0,\n        arrowOverflow: true,\n      },\n    },\n  })\n}\n"],"names":["enhanceTwoslash","app","isMobileDevice","isMobile","event","el","recomputeAllPoppers","FloatingVue"],"mappings":"6IAwBO,MAAMA,EAAmBC,GAAmB,CACjD,MAAMC,EAAiB,iBACnB,GACAC,EAAS,UAAU,SAAS,EAE3B,kBAEH,OAAO,iBACL,QACCC,GAAU,CACIA,EAAM,aAAA,EAEZ,KAAMC,GAERA,GAAoB,WAAW,SAAS,aAAa,CACxD,GAEAC,EAAAA,CACJ,EACA,CAAE,QAAS,EAAK,CAClB,EAGFL,EAAI,IAAIM,EAAa,CACnB,OAAQ,CACN,SAAY,CACV,QAAS,WACT,SAAUL,EAAiB,CAAC,OAAO,EAAI,CAAC,QAAS,OAAO,EACxD,eAAgBA,EAAiB,CAAC,OAAO,EAAI,CAAC,QAAS,OAAO,EAC9D,UAAW,eACX,gBAAiB,GACjB,MAAO,EACP,aAAc,GACd,SAAU,GACV,YAAa,GACb,KAAM,GACN,aAAc,EACd,oBAAqB,EACvB,EACA,iBAAkB,CAChB,QAAS,WACT,SAAU,CAAC,OAAO,EAClB,eAAgB,CAAC,OAAO,EACxB,SAAU,EACZ,EACA,sBAAuB,CACrB,QAAS,iBACT,SAAU,CAAC,OAAO,EAClB,eAAgB,CAAC,OAAO,EACxB,SAAU,GACV,SAAU,EACV,cAAe,EACjB,CACF,CACF,CAAC,CACH"}